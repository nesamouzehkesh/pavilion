function getPaht(e,t){var n="";return $.each(t,function(e,t){t!==undefined&&(n=n+"&"+e+"="+t)}),e+n}function fireTooltip(e){$("#"+e).tooltip({selector:'[data-toggle="tooltip"]'})}function searchItems(e,t,n,r){var i=e.val();searchText!==i&&displayItems(t,n,r),searchText=i}function deleteItem(e,t,n,r){var i="Do your really want to delete this item?",s=e.attr("data-url");bootbox.confirm(i,function(e){if(!e)return!0;$.post(s,function(e){e.success===!0?t!==undefined?(displayItems(t,n,r),getFlashBag()):location.reload():bootbox.alert(e.message)},"json")})}function getFlashBag(){var e=$("#flashBag-container"),t=e.attr("data-url");$.get(t,function(t){t.content!==undefined&&(e.html(t.content),e.show(),e.delay(4e3).slideUp())},"json")}function displayItem(e,t){var n=e.attr("data-url"),r=$(e.attr("data-target"));r!==undefined&&showModal(r),$.get(n,function(e){e.success===!0?r!==undefined?r.html(e.content):(t.html(e.content),t.show()):(r!==undefined&&t.modal("hide"),bootbox.alert(e.message))},"json")}function displayItems(e,t,n){var r=$("#input-search").val(),i;if(""!==r){var s=$("#input-search").attr("data-search-target"),o=$("#input-search").attr("data-search-type");s!==undefined?o!==undefined?i={searchText:r,searchTarget:s,searchType:o,page:n}:i={searchText:r,searchTarget:s,page:n}:i={searchText:r,page:n}}else i={page:n};loadingMessage(!0,t),$.get(e,i,function(e){loadingMessage(!1,t),e.success===!0?t.html(e.content):bootbox.alert(e.message)},"json")}function sortAble(e,t){e.sortable({connectWith:".d-sortable-connected",dropOnEmpty:!0,update:function(e,n){var r=$(this).sortable("toArray").toString(),i=$(this).attr("data-url");simpleGet(i,{sortIds:r},t)}})}function showModal(e){e.modal("show"),e.html('<div class="modal-dialog"><div class="modal-content"><div class="modal-body"><p>Loading ...</p></div></div></div>')}function handleForm(e,t,n,r,i){var s=e.attr("data-url"),o=$(e.attr("data-target"));showModal(o),$.get(s,function(e){e.success===!0?(postForm(e,o,t,n,r),i!==undefined&&setTimeout(function(){i(o)},300)):(o.modal("hide"),bootbox.alert(e.message))},"json")}function simpleGet(e,t,n){$.get(e,t,function(e){e.success!==!0&&bootbox.alert(e.message),n!==undefined&&setTimeout(function(){n(e)},300)},"json")}function actionLink(e){var t=e.attr("data-url");location.href=t}function loadingMessage(e,t){!0===e?t.addClass("d-loading-background"):t.removeClass("d-loading-background")}function postForm(e,t,n,r,i){t.html(e.content);var s=t.find("form");s.submit(function(e){return e.preventDefault(),postFormContent($(this),function(e){if(e.content!==undefined)postForm(e,t,n,r,i);else if(e.success===!0)n===undefined||r===undefined?location.reload():(t.modal("toggle"),displayItems(n,r,i));else{Ladda.stopAll();var o=s.find(".form-message");o.html(getAlart(e.message,"warning")),o.show(),o.delay(2e3).slideUp()}},"json"),!1})}function getAlart(e,t){var n={success:"glyphicon glyphicon-ok-sign",info:"glyphicon glyphicon-info-sign",warning:"glyphicon glyphicon-exclamation-sign",error:"glyphicon glyphicon-remove-sign"};return t=t==="error"?"danger":t,'<div class="alert alert-'+t+'" role="alert"><span class="'+n[t]+'" aria-hidden="true"></span> '+e+"</div>"}function postFormContent(e,t){var n={},r={};if(typeof CKEDITOR!="undefined")for(var i in CKEDITOR.instances)CKEDITOR.instances[i].updateElement();$.each(e.serializeArray(),function(e,t){var i=t.name,s=i.length;if("[]"===i.substr(s-2,s)){var o=i.substr(0,s-2);r[o]===undefined?r[o]=0:r[o]=r[o]+1,n[o+"["+r[o]+"]"]=t.value}else n[i]=t.value}),$.ajax({type:e.attr("method"),url:e.attr("action"),data:n,success:function(e){t(e)}})}var searchText="",CKEDITOR_BASEPATH="/js/ckeditor/";$(document).ready(function(){function e(e){return e?"addClass":"removeClass"}$(this).on("input",".clearable",function(){$(this)[e(this.value)]("x")}).on("mousemove",".x",function(t){$(this)[e(this.offsetWidth-18<t.clientX-this.getBoundingClientRect().left)]("onX")}).on("click",".onX",function(){$(this).removeClass("x onX").val("").change()}),$("#nav").affix({offset:{top:0}}),$("#sidebar").affix({offset:{top:20}}),$("#main-sidebar-toggle").click(function(){$("#main-sidebar .full-block").hasClass("sm")?($("#main-body").removeClass("main-body-lg main-body-default").addClass("main-body-sm"),$("#main-sidebar .full-block").removeClass("sm default").addClass("lg",{duration:100}),$("#main-sidebar-toggle").removeClass("sidebar-toggle-open").addClass("sidebar-toggle-close")):($("#main-body").removeClass("main-body-sm main-body-default").addClass("main-body-lg"),$("#main-sidebar .full-block").removeClass("lg default").addClass("sm",{duration:50}),$("#main-sidebar-toggle").removeClass("sidebar-toggle-close").addClass("sidebar-toggle-open"))}),$(".action-delete").click(function(e){e.preventDefault();var t="Do your really want to delete this order?",n=$(this).attr("href");bootbox.confirm(t,function(e){if(!e)return!0;$.post(n,function(e){e.success===!0?location.reload():bootbox.alert(e.message)},"json")})}),$(".dropdown-menu li a").click(function(){$(this).parents(".dropdown").find(".btn").html($(this).text()+' <span class="caret"></span>'),$(this).parents(".dropdown").find(".btn").val($(this).data("value"))}),$(".action-set-search-type").click(function(e){var t=$(this).attr("data-search-target"),n=$(this).attr("data-search-type"),r=$(this).attr("data-search-input");n!==undefined&&$("#"+r).attr("data-search-type",n),$("#"+r).attr("data-search-target",t)})}),$.fn.isValid=function(){return this[0].checkValidity()};