{% extends "ProductBundle::layout.html.twig" %}

{% block header %}
    <button data-url="{{ path('saman_admin_product_add') }}" id="action-add-product" type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#product-form-container">{{ 'icon.add'|icon }} {{ 'action.addNewItem'|trans }}</button>
{% endblock %}

{% block body %}

    <div class="modal fade" id="product-form-container" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>

    <table class="table table-hover">
        <thead>
            <tr>
                <th>Title</th>
                <th>Price</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        {% for product in productsPagination %}
            <tr class="{{ product.available? '' : 'active' }}">
                <td class="{{ product.available? '' : 'd-text-muted' }}">{{ product.title }}</td>
                <td class="{{ product.available? '' : 'd-text-muted' }}">{{ product.price }}</td>
                <td>
                    <div class="pull-right">
                        {{ button(
                            'action.edit', 
                            {
                                url: path('saman_admin_product_edit', {'productId': product.id}),
                                icon: 'icon.edit', 
                                toggleModal: 'product-form-container', 
                                action: 'action-edit-product'
                            }) }}
                        {{ button(
                            'action.delete', 
                            {
                                url: path('saman_admin_product_delete', {'productId': product.id }),
                                icon: 'icon.delete', 
                                action: 'action-delete-product',
                            }) }}
                    </div>  
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>    
    
    <div class="navigation margin-top-20">
        {{ knp_pagination_render(productsPagination) }}
    </div>

{% endblock %}
    
{% block script %}
    {% include 'ProductBundle:Product:js/products.js.twig' %}
{% endblock %}